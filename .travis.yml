language: android
android:
  components:
    - tools
    - platform-tools
    - tools

    # The BuildTools version used by your project
    - build-tools-26.0.2

    # The SDK version used to compile your project
    - android-26
    # Target version
    - android-24

    # Image for emulator
    - sys-img-armeabi-v7a-android-24


addons:
  apt:
    packages:
      - iproute2
      - docker-ce
      
sudo: required

env:
  - DOCKER_COMPOSE_VERSION=1.22.0

# Update docker-compose Emulator Management: Create, Start and Wait
before_script:
  - curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
  - sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
  - sudo apt-get update
  - sudo apt-get -y -o Dpkg::Options::="--force-confnew" install docker-ce
  - sudo rm /usr/local/bin/docker-compose
  - curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
  - chmod +x docker-compose
  - sudo mv docker-compose /usr/local/bin

  - android list targets
  - cat $(which android-wait-for-emulator)
  - echo no | android create avd --force -n test -t android-24 --abi armeabi-v7a
  - emulator -avd test  -no-window &

script: ./.travis.sh
